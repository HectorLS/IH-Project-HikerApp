<article class="container_map">
  <h4 class="route_title"><%= @route.name %></h4>
  <summary class="route_desc"><%= @route.city %>(<%= @route.country %>)</summary>
  <div id="map" class="googlemap"></div>
  <ul class="map-options item-4 grid">
    <li class="xs-item-1"><span class="icons icon-nature__bear__claw-01"></span></li>
    <li class="xs-item-1"><span class="icons icon-hiking__shelter-01"></span></li>
    <li class="xs-item-1"><span class="icons icon-hiking__ranger-01"></span></li>
    <li class="xs-item-1"><span class="icons icon-hiking--picnic-area-01"></span></li>
    <li class="xs-item-1"><span class="icons icon-police__badge-01"></span></li>
    <li class="xs-item-1"><span class="icons icon-star-full"></span></li>

    <li class="xs-item-5"><span class="icons icon-hiking__compass-01">40.41415415,-23.343434</span></li>
    <li class="xs-item-1"><span class="icons icon-contact_info-01"></span></li>
    <li class="xs-item-3"><span class="icons icon-hiking_distance-02">23.5 km</span></li>
    <li class="xs-item-3"><span class="icons icon-hiking_altitude-02">3.2345 m.</span></li>
  </ul>
</article>

<script type="text/javascript">

//ELEGIDO

$(document).ready(function(){
  var map = new ol.Map({

    view: new ol.View({
      center: [0, 0],
      zoom: 3,
      maxZoom: 18,
      minZoom: 3,
    }),



// new.ol.layer.Marker({
//   source: new.ol.source({
//     url: 'http://www.ol.org/dev/img/marker.png'
    
//   })
// })
    layers: [
      new ol.layer.Tile({
        source: new ol.source.MapQuest({layer: 'osm'})
      }),

      <% @route.layers.each do |layer| %>
        new ol.layer.Vector({
          source: new ol.source.GPX({
            projection: ol.proj.get('EPSG:3857'),
            url: '<%= layer.gpx.url %>'
          })
        }),


        new ol.layer.Vector({
          source: new ol.source.KML({
            projection: ol.proj.get('EPSG:3857'),
            url: '<%= layer.kml.url %>'
          })
        })
      <% end %>
    ],
    target: 'map'
  });

//STYLE EXAMPLE
  // var iconStyle = new ol.style.Style({
  //   image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
  //     anchor: [0.5, 46],
  //     size: [32, 48],
  //     anchorXUnits: 'pixels',
  //     anchorYUnits: 'pixels',
  //     opacity: 0.75,
  //     src: 'http://ol3js.org/en/master/examples/data/icon.png'
  //   }))
  // });

//OTHER STYLE EXAMPLE
// var iconFeatures=[];

// var iconFeature = new ol.Feature({
//   geometry: new ol.geom.Point(ol.proj.transform([-72.0704, 46.678], 'EPSG:4326',     
//   'EPSG:3857')),
//   name: 'Null Island',
//   population: 4000,
//   rainfall: 500
// });

// var iconFeature1 = new ol.Feature({
//   geometry: new ol.geom.Point(ol.proj.transform([-73.1234, 45.678], 'EPSG:4326',     
//   'EPSG:3857')),
//   name: 'Null Island Two',
//   population: 4001,
//   rainfall: 501
// });

// iconFeatures.push(iconFeature);
// iconFeatures.push(iconFeature1);

// var vectorSource = new ol.source.Vector({
//   features: iconFeatures //add an array of features
// });

// var iconStyle = new ol.style.Style({
//   image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
//     anchor: [0.5, 46],
//     anchorXUnits: 'fraction',
//     anchorYUnits: 'pixels',
//     opacity: 0.75,
//     src: 'http://ol3js.org/en/master/examples/data/icon.png'
//   }))
// });


// var vectorLayer = new ol.layer.Vector({
//   source: vectorSource,
//   style: iconStyle
// });



  // ELiminando el footer en la vista del mapa
  mapFullScreen();

  function mapFullScreen() {
    $("footer").css({"display": "none"});
    $(".main-content").css({"height": "100%"});
  }



});
</script>

